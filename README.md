# Truckin-IT Optimizer
_A centralised repository for the Truckin-IT Job Optimization Service._

**Please be aware that this repository is being mirrored from [GitLab][gitlab-optimizer-repo] → 
[GitHub][github-optimizer-repo]**

[gitlab-optimizer-repo]: https://gitlab.com/team-enigma/job-optimizer "GitLab Truckin-IT Optimizer"
[github-optimizer-repo]: https://github.com/COS301-SE-2020/truckinit-optimizer "GitHub Truckin-IT Optimizer"

As a result, if you are viewing this repository on GitHub, we suggest that you rather navigate to the GitLab repository
in order to view all issues as well as download the container image for this service from the GitLab Container Registry.

## Team Enigma
This project is a product by team Enigma for the "COS301 - Software Engineering" (University of Pretoria) 2020 Capstone Project Assignment.
- For more information about the team, [check out our website][enigma-website]!
- For our other related project modules, see the following:
  - Mobile Apps ([gitlab][gitlab-mobile-repo] → [github][github-mobile-repo])
  - Cluster Deployment ([gitlab][gitlab-deploy-repo] → [github][github-deploy-repo])
  - API Server ([gitlab][gitlab-optimizer-repo] → [github][github-optimizer-repo])
  - Team Page ([gitlab][gitlab-team-page-repo])

[gitlab-deploy-repo]: https://gitlab.com/team-enigma/deploy "GitLab Truckin-IT Deploy"
[github-deploy-repo]: https://github.com/COS301-SE-2020/truckinit-deploy "GitHub Truckin-IT Deploy"

[gitlab-mobile-repo]: https://gitlab.com/team-enigma/mobile "GitLab Truckin-IT Mobile"
[github-mobile-repo]: https://github.com/COS301-SE-2020/truckinit-mobile "GitHub Truckin-IT Mobile"

[gitlab-api-repo]: https://gitlab.com/team-enigma/api "GitLab Truckin-IT API"
[github-api-repo]: https://github.com/COS301-SE-2020/truckinit-api "GitHub Truckin-IT API"

[gitlab-team-page-repo]: https://gitlab.com/team-enigma/team-page "Enigma Team Page"

## Documentation
While this README serves as a guideline, our official workflow, goals and user guides are viewable with the below official documents:

- **Requirement Specifications** ([link][enigma-srs-doc-latest]): Information on our functional requirements, quality standards, architectural goals and application use cases can all be found in our [Software Requirement Specification (SRS)][enigma-srs-doc-latest]*. The contents of this document will be updated continuously during the development process as new factors and goals come to light.

- **Coding Standards** ([link][enigma-api-standards-doc]): Workflow rules and implementation standards have been defined in our Coding Standards Documents for the [mobile][enigma-mobile-standards-doc] and [API][enigma-api-standards-doc] teams. These documents are varied slightly to avoid unwanted or unnecessary standards for specific environments.

- **Testing Policy** ([link][enigma-testing-policy-doc]): Internal rules followed by team members for writing and executing unit- and integration-tests are defined in our [Testing Policy][enigma-testing-policy-doc], as well as the technologies we use and the reasons we use them.

- **User Manual** ([link][enigma-usermanual-doc]): High-level information on the Truckin-IT system and user-friendly guides for each mobile app can be found in our [User Manual][enigma-usermanual-doc]. User guides will only represent currently implemented functionality, and as such may not fully reflect the contents of the SRS document above.

- **Technical Installation Manual** ([link][enigma-tech-install-manual-doc]): Our [Technical Installation Manual][enigma-tech-install-manual-doc] is a concise guide on configuring the necessary development and production environments for this project, as well as a technical approach to installing the mobile applications.

User stories are viewable in the [Wiki][gitlab-api-wiki]. In the name of brevity, all points have been limited to a short title and user story with no implementational or motivational detail. For detailed discussion of features please use the SRS Document.

[enigma-srs-doc-latest]: https://enigmasoftware.co.za/other/docs/Software_Requirements_Specification_v4.pdf "SRS Document v4 (latest)"

[enigma-api-standards-doc]: https://enigmasoftware.co.za/other/docs/Coding%20Standards.pdf "API Code Standards"
[enigma-mobile-standards-doc]: https://enigmasoftware.co.za/other/docs/Coding_Standards_Mobile.pdf "Mobile Code Standards"
[enigma-usermanual-doc]: https://enigmasoftware.co.za/other/docs/User_Manual.pdf "User Manual"
[enigma-tech-install-manual-doc]: https://enigmasoftware.co.za/other/docs/Technical_Installation_Manual.pdf "Technical Installation Manual"
[enigma-testing-policy-doc]: https://enigmasoftware.co.za/other/docs/Testing_Policy.pdf "Testing Policy"

[enigma-website]: https://enigmasoftware.co.za "Team Enigma"

[gitlab-api-wiki]: https://gitlab.com/team-enigma/api/-/wiki "API Wiki"
[gitlab-api-issues]: https://gitlab.com/team-enigma/api/-/issues "API Issues"
[gitlab-api-boards]: https://gitlab.com/team-enigma/api/-/boards "API Boards"
[gitlab-api-home]: https://gitlab.com/team-enigma/api/ "Truckin-IT API"

[fleet-manager-app]: https://gitlab.com/team-enigma/mobile/-/raw/master/App%20Downloads/fleetmanager.apk?inline=false "Fleet Manager App"
[customer-app]: https://gitlab.com/team-enigma/mobile/-/raw/master/App%20Downloads/customer.apk?inline=false "Customer App"
[trucker-app]: https://gitlab.com/team-enigma/mobile/-/raw/master/App%20Downloads/trucker.apk?inline=false "Trucker App"


\* Note: the above SRS Document is the latest version. See our version history below
- v1 ([link][enigma-srs-doc])
- v2 ([link][enigma-srs-doc2])
- v3 ([link][enigma-srs-doc3])
- v4 ([link][enigma-srs-doc4])

[enigma-srs-doc]: https://enigmasoftware.co.za/other/docs/Software_Requirements_Specification.pdf "SRS Document"
[enigma-srs-doc2]: https://enigmasoftware.co.za/other/docs/Software_Requirements_Specification_v2.pdf "SRS Document v2"
[enigma-srs-doc3]: https://enigmasoftware.co.za/other/docs/Software_Requirements_Specification_v3.pdf "SRS Document v3"
[enigma-srs-doc4]: https://enigmasoftware.co.za/other/docs/Software_Requirements_Specification_v4.pdf "SRS Document v4"

## Our Team
For more about us, [check out our website!](https://enigmasoftware.co.za/)

<table>
<tr>
  <td>
  <img alt="Malick Burger" src="https://enigmasoftware.co.za/img/malick/malick.png" width="150pt">
  </td>
  <td>
    <h3>Malick Burger</h3>
    <p><em>Systems Administration and Deployment</em></p>
    <p>(<a href="https://enigmasoftware.co.za/profiles/malick">see profile</a>)</p>
  </td>
</tr>

<tr>
  <td>
  <img alt="Daneel Nortier" src="https://enigmasoftware.co.za/img/daneel/daneel.jpeg" width="150pt">
  </td>
  <td>
    <h3>Daneel Nortier</h3>
    <p><em>Machine Learning and Optimization</em></p>
    <p><b>Active on this repository</b></p>
    <p>(<a href="https://enigmasoftware.co.za/profiles/daneel">see profile</a>)</p>
  </td>
</tr>

<tr>
  <td>
  <img alt="Francois Snyman" src="https://enigmasoftware.co.za/img/francois/francois.jpg" width="150pt">
  </td>
  <td>
    <h3>Francois Snyman</h3>
    <p><em>Mobile & Web Development</em></p>
    <p>(<a href="https://enigmasoftware.co.za/profiles/francois">see profile</a>)</p>
  </td>
</tr>

<tr>
  <td>
  <img alt="Xander Terblanche" src="https://enigmasoftware.co.za/img/xander/xander.jpg" width="150pt">
  </td>
  <td>
    <h3>Xander Terblanche</h3>
    <p><em>UI/UX and Mobile Development</em></p>
    <p>(<a href="https://enigmasoftware.co.za/profiles/xander">see profile</a>)</p>
  </td>
</tr>

<tr>
  <td>
  <img alt="Preston van Tonder" src="https://enigmasoftware.co.za/img/preston/profile.png" width="150pt">
  </td>
  <td>
    <h3>Preston van Tonder</h3>
    <p><em>API Design and DevOps</em></p>
    <p><b>Active on this repository</b></p>
    <p>(<a href="https://enigmasoftware.co.za/profiles/preston">see profile</a>)</p>
  </td>
</tr>
</table>


## Milestones

- **Capstone Demo 1** (12/06/2020)\
  _Initial Git management, CI/CD, documentation, and basic feature implementation_\
  **Demo Video** ([link][demo-1-vid])

+ **Capstone Demo 2** (~26/06/2020)\
  _Updated SRS with architecture and quality requirements, user manual and continued implementation_\
  **Demo Video** ([link][demo-2-vid])

- **Capstone Demo 3** (~07/08/2020)\
  _80% feature implementation, installation manual and updated requirement documentation_\
  **Demo Video** ([link][demo-3-vid])

+ **Capstone Demo 4 & Exam Demo** (~11/09/2020)\
  _100% feature completion, with an additional feature_\
  **Demo Video** ([link][demo-4-vid])

- **Final Evaluation & Project Day** (~05/10/2020)\
  _Requirements TBA_\
  (demo video not available)
  
 [demo-1-vid]: https://drive.google.com/file/d/1xw0LM0fvceLCPUfsJYU96KzZ6ITmWaVL/preview "Demo 1"
 [demo-2-vid]: https://drive.google.com/file/d/1TCIj4JkCUdBKWeE84fsgQrzeAmtIvK5P/preview "Demo 2"
 [demo-3-vid]: https://drive.google.com/file/d/1H6bxoAPjE4ZhnfrziqzC0KH2rpzIgIK7/preview "Demo 3"
 [demo-4-vid]: https://drive.google.com/drive/folders/1Rselc8D0GiJGBkm6o7nEeA4ycK-txTCW?usp=sharing "Demo 4"


## Project Management


#### Issue Tracking
Project Management is centered in the GitLab [Issue Tracker](https://gitlab.com/groups/team-enigma/-/issues) and
[Wiki](https://gitlab.com/team-enigma/api/-/wikis/home). The Wiki tracks and categorises user stories, while issues
are created to manage the implementation of those stories' implementations and dependencies.

Each issue is linked to a Milestone (see above) and assigned a label which categorises it into a
[Board](https://gitlab.com/groups/team-enigma/-/boards) for backlog and active task tracking. Task assignment
is integrated into the issue tracker, with new issues being created and assigned at the start of each
sprint (Thursday to Thursday).

#### Branching
The popular [GitHub flow](https://guides.github.com/introduction/flow/) branch-control system has been adopted
along with the [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) commit-naming standard. 
Branch protection rules and strict naming standards have been configured on the 
[active GitLab repository](https://gitlab.com/team-enigma/api/) as described below (if you are reading this on the
mirrored GitHub repository, you will not see these rules).

**GitHub flow** adoption was straight-forward.
- The `master` branch may only be updated via reviewed merge requests from `next`. All automated unit- and integration
tests in the pipeline are required to pass before commits can be accepted. This branch has been configured to only
allow merge requests to be accepted once all three of the project owners —
[Albert Volschenk](https://gitlab.com/albert.volschenk), [Eduan Bekker](https://gitlab.com/bekker.eduan) and
[Hardu Nel](https://gitlab.com/Hardu2203) — have reviewed the changes.
- The `next` branch may only be updated via merge requests from `beta` or any other development branch. Pipeline tests
are run for each commit and are required to pass. Furthermore, at least one internal code review needs to occur before 
a merge request into this branch can be accepted.
- The `beta` pre-release branch may only be updated via merge requests from `alpha` or any other development branch.
It also requires all tests to pass and at least one code review before a merge request can be accepted.
- The `alpha` pre-release branch may only be updated via merge requests from any other development branch.
It also requires all tests to pass and at least one code review before a merge request can be accepted.

- Development branches, named `<type>/#<issue no.>/<description>` are the only branches in which active changes are allowed.
Developers may update and break these branches as they wish during development, then initiate a merge request into
the `alpha`, `beta` or `next` branches depending on the stage of development.

Development branches may have the following types,

Regex: `(build|chore|ci|docs|feat|fix|perf|refactor|style|test)`

#### Commit Control

**Conventional Commits** is used as a commit naming guideline for this repository. For more information on this, please
visit the following [link](https://www.conventionalcommits.org/en/v1.0.0-beta.3/).  
_Note that GitLab automatically links commits to issues when an issue number is referenced with `#<issue no.>`_

Each commit message follows the pattern:

Regex: `(build|chore|ci|docs|feat|fix|perf|refactor|style|test)(\(#\d+\))?: (.+)((\n\n|.)+)`

Simplified Pattern: `<type>(<optional scope>): <description>`

In order to indicate a breaking change or a closed issue, the following applies:

```
<type>(<optional scope>): <description>

BREAKING CHANGE: <description>

Closes #<issue no.>
```

## Development and Operations

#### Continuous Integration

This project makes use of GitLab Runners in order to run automated builds and automated tests for each merge request into
any of our protected branches (`alpha`, `beta`, `master` and `next`). As mentioned above, a merge request into any of
these branches requires at least one internal review from another team member. An exception to this rule is the `master`
branch. This branch is reserved for stable, quality-assured code that has been approved by all three of our project
owners.

#### Continuous Delivery

In order to ensure continuous delivery, this project makes use of a utility called [Semantic Release](https://semantic-release.gitbook.io/). After a successful
merge request has been completed and depending on the changes introduced into the protected branch, a pipeline is
started. This pipeline has two stages, `release` and `deploy`. For any changes starting with the pattern
`(feat|fix|perf|refactor|revert)`, the pipeline will run, otherwise, it will be skipped since these changes don't
justify a new release.

##### Release

The `release` stage will parse the commit history from the most recent tag up to the commit for which the pipeline is
running and will automatically bump the version based on the changes found in each commit. Version numbers follow the
[SemVer](https://semver.org/) scheme for versioning (`vX.X.X`). The way in which the version is bumped is shown below:

* A `fix` changes will cause a patch release
* A `feat` changes will cause a minor release
* A `BREAKING CHANGE` will cause a major release
* A combination of `feat` and `fix` changes will cause a minor release
* A combination of `BREAKING CHANGE`, `feat` and `fix` will cause a major release

Once the `release` stage has determined a version number, a changelog is generated and populated with the changes
introduced for that release. Finally, a new tag of the form `vX.X.X` is created and the source code for that release is
packaged and uploaded to GitLab with its corresponding release notes.

*This entire process is completely automated and requires no manual intervention! The only thing developers need to do
is ensure that they adhere to the Coventional Commit standard, which is enforced by this repository.*

##### Deploy

After the `release` stage has successfully run, the `deploy` stage will begin the process of building and tagging
a Docker image. The image is named `tapi:vX.X.X` based on the new version and automatically pushed to the [GitLab
Container Registry](https://gitlab.com/team-enigma/api/container_registry) for this project.

***Note:** we have decided that we will not run the `deploy` stage for any new changes introduced into the `alpha`
branch because these are deemed as alpha pre-releases, however, the source code for these releases can still
be downloaded from [GitLab](https://gitlab.com/team-enigma/api/-/releases).*
